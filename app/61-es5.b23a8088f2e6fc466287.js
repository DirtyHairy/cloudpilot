!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{"6aA7":function(t,o,a){"use strict";a.r(o),a.d(o,"EmulationPageModule",function(){return E});var r=a("SVse"),c=a("iInd"),l=a("mrSG"),u=a("8Y7J"),s=a("bucj"),h=a("sZkV"),d=["canvas"],v=3*devicePixelRatio;function f(e,t,n,i){var o=e.measureText(i);e.textBaseline="middle",e.fillText(i,t-o.width/2,n)}var m,b,g,p=[{path:"",component:(m=function(){function t(i,o){var a=this;n(this,t),this.emulationService=i,this.ngZone=o,this.handeMouseEvent=function(t){var n,i=a.eventToPalmCoordinates(t);1&t.buttons?i&&(n=a.emulationService).handlePointerMove.apply(n,e(i)):a.emulationService.handlePointerUp()},this.handleTouchEvent=function(t){if(t.touches.length>0){var n,i=a.eventToPalmCoordinates(t.touches.item(0));i&&(n=a.emulationService).handlePointerMove.apply(n,e(i))}else a.emulationService.handlePointerUp();t.preventDefault()},this.onNewFrame=function(e){a.canvasRef.nativeElement.getContext("2d").drawImage(e,0,0,160*v,160*v)}}var o,a,r;return o=t,(a=[{key:"ngAfterViewInit",value:function(){var e=this,t=this.canvasRef.nativeElement,n=t.getContext("2d");n.imageSmoothingEnabled=!1,n.beginPath(),n.rect(0,0,160*v,160*v),n.fillStyle="#ccc",n.fill(),this.drawSilkscreen(),this.drawButtons(),this.ngZone.runOutsideAngular(function(){t.addEventListener("mousedown",e.handeMouseEvent),t.addEventListener("mouseup",e.handeMouseEvent),t.addEventListener("mousemove",e.handeMouseEvent),t.addEventListener("touchstart",e.handleTouchEvent),t.addEventListener("touchmove",e.handleTouchEvent),t.addEventListener("touchend",e.handleTouchEvent),t.addEventListener("touchcancel",e.handleTouchEvent)})}},{key:"canvasWidth",get:function(){return 160*v}},{key:"canvasHeight",get:function(){return 250*v}},{key:"ionViewDidEnter",value:function(){this.emulationService.newFrame.addHandler(this.onNewFrame),this.emulationService.resume()}},{key:"ionViewWillLeave",value:function(){this.emulationService.pause(),this.emulationService.newFrame.removeHandler(this.onNewFrame)}},{key:"drawSilkscreen",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Image,e.next=3,new Promise(function(e,n){t.onload=function(){return e()},t.onerror=function(){return n()},t.src="assets/silkscreen.png"});case 3:(n=this.canvasRef.nativeElement.getContext("2d")).beginPath(),n.rect(0,160*v,160*v,60*v),n.fillStyle="#eee",n.fill(),n.imageSmoothingEnabled=!0,n.imageSmoothingQuality="high",n.drawImage(t,0,160*v,160*v,60*v),n.imageSmoothingEnabled=!1;case 5:case"end":return e.stop()}},e,this)}))}},{key:"drawButtons",value:function(){var e=this.canvasRef.nativeElement.getContext("2d");e.beginPath(),e.rect(0,220*v,160*v,30*v),e.fillStyle="white",e.fill(),e.beginPath(),e.lineWidth=3,e.strokeStyle="black",e.moveTo(0,220*v),e.lineTo(160*v,220*v),e.moveTo(30*v,220*v),e.lineTo(30*v,250*v),e.moveTo(60*v,220*v),e.lineTo(60*v,250*v),e.moveTo(130*v,220*v),e.lineTo(130*v,250*v),e.moveTo(100*v,220*v),e.lineTo(100*v,250*v),e.moveTo(60*v,235*v),e.lineTo(100*v,235*v),e.stroke(),e.font=10*v+"px sans",e.fillStyle="black",f(e,15*v,235*v,"D"),f(e,45*v,235*v,"P"),f(e,115*v,235*v,"T"),f(e,145*v,235*v,"N")}},{key:"eventToPalmCoordinates",value:function(e){var t,n,i,o,a=this.canvasRef.nativeElement.getBoundingClientRect();a.width/a.height>.64?(o=a.height,i=.64*a.height,n=a.top,t=a.left+(a.width-i)/2):(i=a.width,o=1.5625*a.width,t=a.left,n=a.top+(a.height-o)/2);var r=Math.floor((e.clientX-t)/i*160),c=Math.floor((e.clientY-n)/o*250);if(!(r<0||r>=160||c<0||c>=220))return[r,c]}}])&&i(o.prototype,a),r&&i(o,r),t}(),m.\u0275fac=function(e){return new(e||m)(u.Jb(s.a),u.Jb(u.B))},m.\u0275cmp=u.Db({type:m,selectors:[["app-emulation"]],viewQuery:function(e,t){var n;1&e&&u.jc(d,1),2&e&&u.ac(n=u.Vb())&&(t.canvasRef=n.first)},decls:18,vars:2,consts:[["slot","end"],["name","power-outline"],["name","add-outline"],["slot","start"],["name","ellipsis-vertical-outline"],["name","checkmark-circle-outline"],[1,"container"],[3,"width","height"],["canvas",""]],template:function(e,t){1&e&&(u.Mb(0,"ion-header"),u.Mb(1,"ion-toolbar"),u.Mb(2,"ion-title"),u.fc(3,"Emulator"),u.Lb(),u.Mb(4,"ion-buttons",0),u.Mb(5,"ion-button"),u.Kb(6,"ion-icon",1),u.Lb(),u.Mb(7,"ion-button"),u.Kb(8,"ion-icon",2),u.Lb(),u.Lb(),u.Mb(9,"ion-buttons",3),u.Mb(10,"ion-button"),u.Kb(11,"ion-icon",4),u.Lb(),u.Mb(12,"ion-button"),u.Kb(13,"ion-icon",5),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Mb(14,"ion-content"),u.Mb(15,"div",6),u.Kb(16,"canvas",7,8),u.Lb(),u.Lb()),2&e&&(u.zb(16),u.Zb("width",t.canvasWidth)("height",t.canvasHeight))},directives:[h.f,h.s,h.r,h.d,h.c,h.g,h.e],styles:["ion-title[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;padding:5px}canvas[_ngcontent-%COMP%]{max-width:100%;max-height:100%;height:750px;width:480px;-o-object-fit:contain;object-fit:contain}"]}),m)}],w=((b=function e(){n(this,e)}).\u0275mod=u.Hb({type:b}),b.\u0275inj=u.Gb({factory:function(e){return new(e||b)},imports:[[c.i.forChild(p)],c.i]}),b),y=a("s7LF"),E=((g=function e(){n(this,e)}).\u0275mod=u.Hb({type:g}),g.\u0275inj=u.Gb({factory:function(e){return new(e||g)},imports:[[r.b,y.a,h.t,w]]}),g)}}])}();