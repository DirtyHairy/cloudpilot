(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{"6aA7":function(e,t,n){"use strict";n.r(t),n.d(t,"EmulationPageModule",function(){return m});var i=n("SVse"),o=n("iInd"),a=n("mrSG"),c=n("8Y7J"),r=n("bucj"),s=n("sZkV");const u=["canvas"],l=[{path:"",component:(()=>{class e{constructor(e){this.emulationService=e,this.onNewFrame=e=>{this.canvasRef.nativeElement.getContext("2d").drawImage(e,0,0,480,480)}}ngAfterViewInit(){const e=this.canvasRef.nativeElement.getContext("2d");e.fillStyle="#aaa",e.rect(0,0,this.canvasWidth,this.canvasHeight),e.fill(),e.imageSmoothingEnabled=!1,this.drawSilkscreen()}get canvasWidth(){return 480}get canvasHeight(){return 750}handeMouseEvent(e){const t=this.eventToPalmCoordinates(e);1&e.buttons?t&&this.emulationService.handlePointerMove(...t):this.emulationService.handlePointerUp()}handleTouchEvent(e){if(e.touches.length>0){const t=this.eventToPalmCoordinates(e.touches.item(0));t&&this.emulationService.handlePointerMove(...t)}else this.emulationService.handlePointerUp();e.preventDefault()}ionViewDidEnter(){this.emulationService.newFrame.addHandler(this.onNewFrame),this.emulationService.resume()}ionViewWillLeave(){this.emulationService.pause(),this.emulationService.newFrame.removeHandler(this.onNewFrame)}drawSilkscreen(){return Object(a.a)(this,void 0,void 0,function*(){const e=new Image;yield new Promise((t,n)=>{e.onload=()=>t(),e.onerror=()=>n(),e.src="assets/silkscreen.png"});const t=this.canvasRef.nativeElement.getContext("2d");t.imageSmoothingEnabled=!0,t.imageSmoothingQuality="high",t.drawImage(e,0,480,480,180),t.imageSmoothingEnabled=!1})}eventToPalmCoordinates(e){const t=this.canvasRef.nativeElement.getBoundingClientRect(),n=Math.floor((e.clientX-t.left-5)/(t.width-10)*160),i=Math.floor((e.clientY-t.top-5)/(t.height-10)*250);if(!(n<0||n>=160||i<0||i>=220))return[n,i]}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(r.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-emulation"]],viewQuery:function(e,t){if(1&e&&c.jc(u,1),2&e){let e;c.ac(e=c.Vb())&&(t.canvasRef=e.first)}},decls:18,vars:2,consts:[["slot","end"],["name","power-outline"],["name","add-outline"],["slot","start"],["name","ellipsis-vertical-outline"],["name","checkmark-circle-outline"],[1,"container"],[3,"width","height","mousedown","mouseup","mousemove","touchstart","touchmove","touchend","touchcancel"],["canvas",""]],template:function(e,t){1&e&&(c.Mb(0,"ion-header"),c.Mb(1,"ion-toolbar"),c.Mb(2,"ion-title"),c.fc(3,"Emulator"),c.Lb(),c.Mb(4,"ion-buttons",0),c.Mb(5,"ion-button"),c.Kb(6,"ion-icon",1),c.Lb(),c.Mb(7,"ion-button"),c.Kb(8,"ion-icon",2),c.Lb(),c.Lb(),c.Mb(9,"ion-buttons",3),c.Mb(10,"ion-button"),c.Kb(11,"ion-icon",4),c.Lb(),c.Mb(12,"ion-button"),c.Kb(13,"ion-icon",5),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(14,"ion-content"),c.Mb(15,"div",6),c.Mb(16,"canvas",7,8),c.Ub("mousedown",function(e){return t.handeMouseEvent(e)})("mouseup",function(e){return t.handeMouseEvent(e)})("mousemove",function(e){return t.handeMouseEvent(e)})("touchstart",function(e){return t.handleTouchEvent(e)})("touchmove",function(e){return t.handleTouchEvent(e)})("touchend",function(e){return t.handleTouchEvent(e)})("touchcancel",function(e){return t.handleTouchEvent(e)}),c.Lb(),c.Lb(),c.Lb()),2&e&&(c.zb(16),c.Zb("width",t.canvasWidth)("height",t.canvasHeight))},directives:[s.f,s.s,s.r,s.d,s.c,s.g,s.e],styles:["ion-title[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}canvas[_ngcontent-%COMP%]{max-width:100%;max-height:100%;padding:5px}"]}),e})()}];let h=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(t){return new(t||e)},imports:[[o.i.forChild(l)],o.i]}),e})();var d=n("s7LF");let m=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(t){return new(t||e)},imports:[[i.b,d.a,s.t,h]]}),e})()}}]);